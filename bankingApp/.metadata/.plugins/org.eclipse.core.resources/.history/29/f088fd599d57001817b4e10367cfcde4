package com;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;

public class BankingEngine {
	
	final static String fileLocation = "C:\\Users\\Sharjeel Tahir\\Desktop\\src\\Banking\\src\\com\\users.txt";
	
	ArrayList<Customer> getAllCustomers() {
		DAO readAccessObj = new DAO();
		return readAccessObj.readCustomers();
	}
	
	boolean existsUsername (String username) {
		ArrayList<Customer> customers = getAllCustomers();
		return customers.stream().anyMatch( s -> s.getUsername().equalsIgnoreCase(username));
	}
	
	boolean existsPassword (String password) {
		ArrayList<Customer> customers = getAllCustomers();
		return customers.stream().anyMatch( s -> s.getPassword().equals(password));
	}
	void addCustomer(Customer s) {
		DAO writeAccessObject = new DAO();
		writeAccessObject.addCustomer(s);
		
	}
	
	void depositMoney(String username, Double amount) {
		ArrayList<Customer> customers = getAllCustomers();
		//BufferedWriter writer1 = new BufferedWriter(new FileWriter(fileLocation));
		if (customers.size() !=0) {
			for (Customer customer : customers) {
				if (customer.getUsername().equalsIgnoreCase(username)){
					customer.setBalance(amount);
					System.out.println("Amount " + amount + "has been added to you account" );
				}
			}

		
		}
		
		//customers.stream()(s -> {if(s.getUsername().equalsIgnoreCase(username)) return true;} );
	}
		
	

}
